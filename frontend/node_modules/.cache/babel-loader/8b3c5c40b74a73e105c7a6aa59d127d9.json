{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\kartu\\\\Desktop\\\\ReportPlayer\\\\src\\\\main\\\\reactjs\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useRef,useEffect}from'react';import{useForm}from\"react-hook-form\";import AuthService from'../../service/auth.service';import'./UpdatePassword.scss';import{useHistory}from\"react-router\";var UpdatePassword=function UpdatePassword(){var _useForm=useForm({}),register=_useForm.register,errors=_useForm.errors,handleSubmit=_useForm.handleSubmit,watch=_useForm.watch;var passwordWatched=useRef({});var submitRef=useRef();var _useState=useState(),_useState2=_slicedToArray(_useState,2),response=_useState2[0],setResponse=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];passwordWatched.current=watch(\"password\",\"\");var history=useHistory();var regularExpression=/[0-9]/;var onSubmit=function onSubmit(data){if(submitRef.current){submitRef.current.setAttribute(\"disabled\",\"disabled\");}AuthService.updatePassword(data.oldPassword,data.password,data.confirmPassword).then(function(response){setResponse(response);});};useEffect(function(){console.log(response);if(response===200){setMessage(\"Password Update\");setTimeout(function(){window.location.reload();},1000);}if(response===204){setMessage(\"Password Don't Match\");window.location.reload();}},[response]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h5\",null,\"Update Password\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},message,/*#__PURE__*/React.createElement(\"input\",{name:\"oldPassword\",className:\"form-control mb-2\",type:\"text\",placeholder:\"actual password\",ref:register({required:\"You must type an actual  password\"})}),errors.oldPassword&&/*#__PURE__*/React.createElement(\"p\",null,errors.oldPassword.message),/*#__PURE__*/React.createElement(\"input\",{name:\"password\",className:\"form-control mb-2\",type:\"text\",placeholder:\"new password\",ref:register({required:\"You must type a new  password\",pattern:{value:regularExpression,message:\"Password must contain 1 or more digit characters\"},minLength:{value:8,message:\"Password must have at least 8 characters\"}})}),errors.password&&/*#__PURE__*/React.createElement(\"p\",null,errors.password.message),/*#__PURE__*/React.createElement(\"input\",{name:\"confirmPassword\",className:\"form-control mb-2\",type:\"text\",placeholder:\"confirm password\",ref:register({validate:function validate(value){return value===passwordWatched.current||\"The passwords do not match\";}})}),errors.confirmPassword&&/*#__PURE__*/React.createElement(\"p\",null,errors.confirmPassword.message),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",className:\"form-control mb-1\",ref:submitRef})),response===200&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-success\"},message),response===204&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\"},message));};export default UpdatePassword;","map":{"version":3,"sources":["C:/Users/kartu/Desktop/ReportPlayer/src/main/reactjs/src/component/updatePassword/UpdatePassword.js"],"names":["React","useState","useRef","useEffect","useForm","AuthService","useHistory","UpdatePassword","register","errors","handleSubmit","watch","passwordWatched","submitRef","response","setResponse","message","setMessage","current","history","regularExpression","onSubmit","data","setAttribute","updatePassword","oldPassword","password","confirmPassword","then","console","log","setTimeout","window","location","reload","required","pattern","value","minLength","validate"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { useForm } from \"react-hook-form\";\r\nimport AuthService from '../../service/auth.service';\r\nimport './UpdatePassword.scss';\r\nimport { useHistory } from \"react-router\"\r\n\r\n\r\nconst UpdatePassword = () => {\r\n\r\n    const { register, errors, handleSubmit, watch } = useForm({});\r\n\r\n    const passwordWatched = useRef({});\r\n    let submitRef = useRef();\r\n\r\n\r\n    const [response, setResponse] = useState();\r\n    const [message, setMessage] = useState(\"\")\r\n\r\n    passwordWatched.current = watch(\"password\", \"\")\r\n\r\n    let history = useHistory()\r\n\r\n    var regularExpression = /[0-9]/;\r\n\r\n\r\n    const onSubmit = data => {\r\n        if(submitRef.current) {\r\n            submitRef.current.setAttribute(\"disabled\", \"disabled\");\r\n        }\r\n        AuthService.updatePassword(data.oldPassword, data.password, data.confirmPassword).then(\r\n            (response) => {\r\n                setResponse(response)\r\n            });\r\n    };\r\n\r\n    useEffect(() => {\r\n        console.log(response)\r\n        if (response === 200) {\r\n            setMessage(\"Password Update\")\r\n            setTimeout(() => {\r\n                window.location.reload();\r\n            }, 1000);\r\n\r\n        }\r\n        if (response === 204) {\r\n            setMessage(\"Password Don't Match\")\r\n            window.location.reload();\r\n            \r\n        }\r\n    }, [response])\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            <h5>Update Password</h5>\r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n                {message}\r\n                <input\r\n                    name=\"oldPassword\"\r\n                    className=\"form-control mb-2\"\r\n                    type=\"text\"\r\n                    placeholder=\"actual password\"\r\n                    ref={register({\r\n                        required: \"You must type an actual  password\"\r\n                    })}\r\n                />\r\n                {errors.oldPassword && <p>{errors.oldPassword.message}</p>}\r\n                <input\r\n                    name=\"password\"\r\n                    className=\"form-control mb-2\"\r\n                    type=\"text\"\r\n                    placeholder=\"new password\"\r\n                    ref={register({\r\n                        required: \"You must type a new  password\",\r\n                        pattern: {\r\n                            value: regularExpression,\r\n                            message: \"Password must contain 1 or more digit characters\"\r\n                        },\r\n                        minLength: {\r\n                            value: 8,\r\n                            message: \"Password must have at least 8 characters\"\r\n                        }\r\n                    })}\r\n                />\r\n                {errors.password && <p>{errors.password.message}</p>}\r\n                <input\r\n                    name=\"confirmPassword\"\r\n                    className=\"form-control mb-2\"\r\n                    type=\"text\"\r\n                    placeholder=\"confirm password\"\r\n                    ref={register({\r\n                        validate: value =>\r\n                            value === passwordWatched.current || \"The passwords do not match\"\r\n                    })}\r\n                />\r\n                {errors.confirmPassword && <p>{errors.confirmPassword.message}</p>}\r\n                <input type=\"submit\" className=\"form-control mb-1\"  ref={submitRef}/>\r\n\r\n            </form>\r\n            {response === 200 && <div className=\"alert alert-success\">{message}</div>}\r\n            {response === 204 && <div className=\"alert alert-danger\">{message}</div>}\r\n        </div>\r\n    );\r\n\r\n};\r\n\r\n\r\nexport default UpdatePassword"]},"metadata":{},"sourceType":"module"}