{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\kartu\\\\Desktop\\\\ReportPlayer\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\kartu\\\\Desktop\\\\ReportPlayer\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\kartu\\\\Desktop\\\\ReportPlayer\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import{useForm}from'react-hook-form';import'./FormEmailForgotPassword.scss';import{useHistory}from'react-router';import AuthService from'../../service/auth.service';var FormEmailForgotPassword=function FormEmailForgotPassword(props){var history=useHistory();var btnRef=useRef();var _useForm=useForm({}),register=_useForm.register,errors=_useForm.errors,handleSubmit=_useForm.handleSubmit;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),successful=_useState2[0],setSuccessful=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),submit=_useState4[0],setSubmit=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),response=_useState6[0],setResponse=_useState6[1];var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(btnRef.current){btnRef.current.setAttribute(\"disabled\",\"disabled\");}_context.next=3;return AuthService.sendEmailForgotPassword(data.email).then(function(response){response===200?setSuccessful(true):setSuccessful(false);setResponse(response);});case 3:setSubmit(true);case 4:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();useEffect(function(){if(response===200){setTimeout(function(){btnRef.current.setAttribute(\"enabled\",\"enabled\");history.push('/');},1000);}else{btnRef.current.setAttribute(\"enabled\",\"enabled\");}},[response]);return/*#__PURE__*/React.createElement(\"div\",null,submit&&(successful?/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-success\"},\"A verification link has been sent your email\"):/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\"},\"there is some problem with the request\")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"email\",name:\"email\",className:\"form-control mb-2\",ref:register({required:\"required\"})}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",className:\"form-control\",ref:btnRef}),errors.email&&/*#__PURE__*/React.createElement(\"p\",null,errors.email.message)));};export default FormEmailForgotPassword;","map":{"version":3,"sources":["C:/Users/kartu/Desktop/ReportPlayer/frontend/src/component/EmailForgotPassword/FormEmailForgotPassword.js"],"names":["React","useState","useEffect","useRef","useForm","useHistory","AuthService","FormEmailForgotPassword","props","history","btnRef","register","errors","handleSubmit","successful","setSuccessful","submit","setSubmit","response","setResponse","onSubmit","data","current","setAttribute","sendEmailForgotPassword","email","then","setTimeout","push","required","message"],"mappings":"ogBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,MAArC,KAAmD,OAAnD,CACA,OAASC,OAAT,KAAwB,iBAAxB,CACA,MAAO,gCAAP,CACA,OAASC,UAAT,KAA2B,cAA3B,CACA,MAAOC,CAAAA,WAAP,KAAwB,4BAAxB,CAIA,GAAMC,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,CAACC,KAAD,CAAW,CAEvC,GAAIC,CAAAA,OAAO,CAAGJ,UAAU,EAAxB,CACA,GAAIK,CAAAA,MAAM,CAAGP,MAAM,EAAnB,CAHuC,aAIIC,OAAO,CAAC,EAAD,CAJX,CAI/BO,QAJ+B,UAI/BA,QAJ+B,CAIrBC,MAJqB,UAIrBA,MAJqB,CAIbC,YAJa,UAIbA,YAJa,eAKHZ,QAAQ,CAAC,KAAD,CALL,wCAKhCa,UALgC,eAKpBC,aALoB,8BAMXd,QAAQ,CAAC,KAAD,CANG,yCAMhCe,MANgC,eAMxBC,SANwB,8BAOPhB,QAAQ,EAPD,yCAOhCiB,QAPgC,eAOtBC,WAPsB,eAUvC,GAAMC,CAAAA,QAAQ,0FAAG,iBAAOC,IAAP,kHACb,GAAIX,MAAM,CAACY,OAAX,CAAoB,CAChBZ,MAAM,CAACY,OAAP,CAAeC,YAAf,CAA4B,UAA5B,CAAwC,UAAxC,EACH,CAHY,sBAIPjB,CAAAA,WAAW,CAACkB,uBAAZ,CAAoCH,IAAI,CAACI,KAAzC,EAAgDC,IAAhD,CACF,SAACR,QAAD,CAAc,CACVA,QAAQ,GAAK,GAAb,CAAmBH,aAAa,CAAC,IAAD,CAAhC,CAAyCA,aAAa,CAAC,KAAD,CAAtD,CACAI,WAAW,CAACD,QAAD,CAAX,CACH,CAJC,CAJO,QASbD,SAAS,CAAC,IAAD,CAAT,CATa,sDAAH,kBAARG,CAAAA,QAAQ,4CAAd,CAYAlB,SAAS,CAAC,UAAM,CACZ,GAAIgB,QAAQ,GAAK,GAAjB,CAAsB,CAClBS,UAAU,CAAC,UAAM,CACbjB,MAAM,CAACY,OAAP,CAAeC,YAAf,CAA4B,SAA5B,CAAuC,SAAvC,EACAd,OAAO,CAACmB,IAAR,CAAa,GAAb,EACH,CAHS,CAGP,IAHO,CAAV,CAIH,CALD,IAMK,CACDlB,MAAM,CAACY,OAAP,CAAeC,YAAf,CAA4B,SAA5B,CAAuC,SAAvC,EACH,CACJ,CAVQ,CAUN,CAACL,QAAD,CAVM,CAAT,CAYA,mBACI,+BACKF,MAAM,GAAKF,UAAU,cAAI,2BAAK,SAAS,CAAC,qBAAf,iDAAJ,cACf,2BAAK,SAAS,CAAC,oBAAf,2CADA,CADX,cAII,4BAAM,QAAQ,CAAED,YAAY,CAACO,QAAD,CAA5B,eACI,6BACI,IAAI,CAAC,MADT,CAEI,WAAW,CAAC,OAFhB,CAGI,IAAI,CAAC,OAHT,CAII,SAAS,CAAC,mBAJd,CAKI,GAAG,CAAET,QAAQ,CAAC,CACVkB,QAAQ,CAAE,UADA,CAAD,CALjB,EADJ,cAUI,6BACI,IAAI,CAAC,QADT,CAEI,SAAS,CAAC,cAFd,CAGI,GAAG,CAAEnB,MAHT,EAVJ,CAeKE,MAAM,CAACa,KAAP,eAAgB,6BAAIb,MAAM,CAACa,KAAP,CAAaK,OAAjB,CAfrB,CAJJ,CADJ,CA2BH,CA7DD,CA+DA,cAAevB,CAAAA,uBAAf","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport './FormEmailForgotPassword.scss';\r\nimport { useHistory } from 'react-router';\r\nimport AuthService from '../../service/auth.service';\r\n\r\n\r\n\r\nconst FormEmailForgotPassword = (props) => {\r\n\r\n    let history = useHistory()\r\n    let btnRef = useRef();\r\n    const { register, errors, handleSubmit } = useForm({});\r\n    const [successful, setSuccessful] = useState(false)\r\n    const [submit, setSubmit] = useState(false)\r\n    const [response, setResponse] = useState();\r\n\r\n\r\n    const onSubmit = async (data) => {\r\n        if (btnRef.current) {\r\n            btnRef.current.setAttribute(\"disabled\", \"disabled\");\r\n        }\r\n        await AuthService.sendEmailForgotPassword(data.email).then(\r\n            (response) => {\r\n                response === 200 ? setSuccessful(true) : setSuccessful(false)\r\n                setResponse(response)\r\n            });\r\n        setSubmit(true)\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (response === 200) {\r\n            setTimeout(() => {\r\n                btnRef.current.setAttribute(\"enabled\", \"enabled\");\r\n                history.push('/')\r\n            }, 1000)\r\n        }\r\n        else {\r\n            btnRef.current.setAttribute(\"enabled\", \"enabled\");\r\n        }\r\n    }, [response])\r\n\r\n    return (\r\n        <div>\r\n            {submit && (successful ? (<div className=\"alert alert-success\">A verification link has been sent your email</div>)\r\n                : (<div className=\"alert alert-danger\">there is some problem with the request</div>)\r\n            )}\r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"email\"\r\n                    name=\"email\"\r\n                    className=\"form-control mb-2\"\r\n                    ref={register({\r\n                        required: \"required\"\r\n                    })}\r\n                />\r\n                <input\r\n                    type=\"submit\"\r\n                    className=\"form-control\"\r\n                    ref={btnRef}\r\n                />\r\n                {errors.email && <p>{errors.email.message}</p>}\r\n            </form>\r\n        </div>\r\n\r\n\r\n    );\r\n\r\n};\r\n\r\nexport default FormEmailForgotPassword;"]},"metadata":{},"sourceType":"module"}