{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\kartu\\\\Desktop\\\\LeagueOfReport-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useRef,useState,useEffect}from'react';import{useForm}from'react-hook-form';import{useParams}from\"react-router-dom\";import AuthService from'../../service/auth.service';import{useHistory}from\"react-router\";var ForgotPassword=function ForgotPassword(){var _useForm=useForm({}),register=_useForm.register,errors=_useForm.errors,handleSubmit=_useForm.handleSubmit,watch=_useForm.watch;var _useState=useState(),_useState2=_slicedToArray(_useState,2),response=_useState2[0],setResponse=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var passwordWatched=useRef({});passwordWatched.current=watch(\"password\",\"\");var _useParams=useParams(),token=_useParams.token;var history=useHistory();var onSubmit=function onSubmit(data){AuthService.forgotPassword(data.password,data.confirmPassword,token).then(function(response){setResponse(response);});};useEffect(function(){if(response===200){setMessage(\"Password Update\");setTimeout(function(){history.push('/');},2000);}if(response===401){setMessage(\"Not Allowed\");// window.location.reload();\n}},[response]);return/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control mb-2\",name:\"password\",placeholder:\"password\",ref:register({required:\"You must specify a password\",minLength:{value:8,message:\"Password must have at least 8 characters\"}})}),errors.password&&/*#__PURE__*/React.createElement(\"p\",null,errors.password.message),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control mb-2\",placeholder:\"confirmPassword\",name:\"confirmPassword\",ref:register({required:\"required\",validate:function validate(value){return value===passwordWatched.current||\"The password do not match\";}})}),errors.confirmPassword&&/*#__PURE__*/React.createElement(\"p\",null,errors.confirmPassword.message),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",className:\"form-control mb-1\"}),response===200&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-success\"},message),response===401&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\"},message));};export default ForgotPassword;","map":{"version":3,"sources":["C:/Users/kartu/Desktop/LeagueOfReport-frontend/src/component/formForgotPassword/FormForgotPassword.js"],"names":["React","useRef","useState","useEffect","useForm","useParams","AuthService","useHistory","ForgotPassword","register","errors","handleSubmit","watch","response","setResponse","message","setMessage","passwordWatched","current","token","history","onSubmit","data","forgotPassword","password","confirmPassword","then","setTimeout","push","required","minLength","value","validate"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form';\r\nimport { useParams } from \"react-router-dom\";\r\nimport AuthService from '../../service/auth.service';\r\nimport { useHistory } from \"react-router\"\r\n\r\n\r\nconst ForgotPassword = () => {\r\n\r\n    const { register, errors, handleSubmit, watch } = useForm({});\r\n    const [response, setResponse] = useState();\r\n    const [message, setMessage] = useState(\"\")\r\n    const passwordWatched = useRef({});\r\n    passwordWatched.current = watch(\"password\", \"\")\r\n\r\n    const { token } = useParams();\r\n\r\n    let history = useHistory()\r\n\r\n    const onSubmit = data => {\r\n        AuthService.forgotPassword(data.password, data.confirmPassword, token).then(\r\n            (response) => {\r\n                setResponse(response)\r\n            });\r\n    };\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if (response === 200) {\r\n            setMessage(\"Password Update\")\r\n            setTimeout(() => {\r\n                history.push('/');\r\n            }, 2000);\r\n        }\r\n        if (response === 401) {\r\n            setMessage(\"Not Allowed\")\r\n           // window.location.reload();\r\n\r\n        }\r\n    }, [response])\r\n\r\n    return (\r\n\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n            <input\r\n                type=\"text\"\r\n                className=\"form-control mb-2\"\r\n                name=\"password\"\r\n                placeholder=\"password\"\r\n                ref={register({\r\n                    required: \"You must specify a password\",\r\n                    minLength: {\r\n                        value: 8,\r\n                        message: \"Password must have at least 8 characters\"\r\n                    }\r\n                })}\r\n            />\r\n            {errors.password && <p>{errors.password.message}</p>}\r\n            <input\r\n                type=\"text\"\r\n                className=\"form-control mb-2\"\r\n                placeholder=\"confirmPassword\"\r\n                name=\"confirmPassword\"\r\n                ref={register({\r\n                    required: \"required\",\r\n                    validate: value =>\r\n                        value === passwordWatched.current || \"The password do not match\"\r\n                })}\r\n            />\r\n            {errors.confirmPassword && <p>{errors.confirmPassword.message}</p>}\r\n            <input\r\n                type=\"submit\"\r\n                className=\"form-control mb-1\"\r\n            />\r\n            {response === 200 && <div className=\"alert alert-success\">{message}</div>}\r\n            {response === 401 && <div className=\"alert alert-danger\">{message}</div>}\r\n        </form>\r\n\r\n    );\r\n};\r\n\r\nexport default ForgotPassword;"]},"metadata":{},"sourceType":"module"}