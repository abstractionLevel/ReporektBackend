{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kartu\\\\Desktop\\\\reactjs\\\\src\\\\component\\\\updatePassword\\\\UpdatePassword.js\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useForm } from \"react-hook-form\";\nimport AuthService from '../../service/auth.service';\nimport './UpdatePassword.scss';\nimport { useHistory } from \"react-router\";\n\nconst UpdatePassword = () => {\n  const {\n    register,\n    errors,\n    handleSubmit,\n    watch\n  } = useForm({});\n  const passwordWatched = useRef({});\n  let submitRef = useRef();\n  const [response, setResponse] = useState();\n  const [message, setMessage] = useState(\"\");\n  passwordWatched.current = watch(\"password\", \"\");\n  let history = useHistory();\n  var regularExpression = /[0-9]/;\n\n  const onSubmit = data => {\n    if (submitRef.current) {\n      submitRef.current.setAttribute(\"disabled\", \"disabled\");\n    }\n\n    AuthService.updatePassword(data.oldPassword, data.password, data.confirmPassword).then(response => {\n      setResponse(response);\n    });\n  };\n\n  useEffect(() => {\n    console;\n\n    if (response === 200) {\n      setMessage(\"Password Update\");\n      setTimeout(() => {\n        window.location.reload();\n      }, 1000);\n    }\n\n    if (response === 204) {\n      setMessage(\"Password Don't Match\");\n      submitRef.current.removeAttribute(\"disabled\");\n      console.log(\"dio cane\");\n    }\n  }, [response]);\n  console.log(response);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, \"Update Password\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, message, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"oldPassword\",\n    className: \"form-control mb-2\",\n    type: \"text\",\n    placeholder: \"actual password\",\n    ref: register({\n      required: \"You must type an actual  password\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }), errors.oldPassword && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 40\n    }\n  }, errors.oldPassword.message), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"password\",\n    className: \"form-control mb-2\",\n    type: \"text\",\n    placeholder: \"new password\",\n    ref: register({\n      required: \"You must type a new  password\",\n      pattern: {\n        value: regularExpression,\n        message: \"Password must contain 1 or more digit characters\"\n      },\n      minLength: {\n        value: 8,\n        message: \"Password must have at least 8 characters\"\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }), errors.password && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 37\n    }\n  }, errors.password.message), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"confirmPassword\",\n    className: \"form-control mb-2\",\n    type: \"text\",\n    placeholder: \"confirm password\",\n    ref: register({\n      validate: value => value === passwordWatched.current || \"The passwords do not match\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }), errors.confirmPassword && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 44\n    }\n  }, errors.confirmPassword.message), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"form-control mb-1\",\n    ref: submitRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  })), response === 200 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 34\n    }\n  }, message), response === 204 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 34\n    }\n  }, message));\n};\n\nexport default UpdatePassword;","map":{"version":3,"sources":["C:/Users/kartu/Desktop/reactjs/src/component/updatePassword/UpdatePassword.js"],"names":["React","useState","useRef","useEffect","useForm","AuthService","useHistory","UpdatePassword","register","errors","handleSubmit","watch","passwordWatched","submitRef","response","setResponse","message","setMessage","current","history","regularExpression","onSubmit","data","setAttribute","updatePassword","oldPassword","password","confirmPassword","then","console","setTimeout","window","location","reload","removeAttribute","log","required","pattern","value","minLength","validate"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { useForm } from \"react-hook-form\";\r\nimport AuthService from '../../service/auth.service';\r\nimport './UpdatePassword.scss';\r\nimport { useHistory } from \"react-router\"\r\n\r\n\r\nconst UpdatePassword = () => {\r\n\r\n    const { register, errors, handleSubmit, watch } = useForm({});\r\n\r\n    const passwordWatched = useRef({});\r\n    let submitRef = useRef();\r\n\r\n\r\n    const [response, setResponse] = useState();\r\n    const [message, setMessage] = useState(\"\")\r\n\r\n    passwordWatched.current = watch(\"password\", \"\")\r\n\r\n    let history = useHistory()\r\n\r\n    var regularExpression = /[0-9]/;\r\n\r\n\r\n    const onSubmit = data => {\r\n        if(submitRef.current) {\r\n            submitRef.current.setAttribute(\"disabled\", \"disabled\");\r\n        }\r\n        AuthService.updatePassword(data.oldPassword, data.password, data.confirmPassword).then(\r\n            (response) => {\r\n                setResponse(response)\r\n            });\r\n    };\r\n\r\n    useEffect(() => {\r\n        console\r\n        if (response === 200) {\r\n            setMessage(\"Password Update\")\r\n            setTimeout(() => {\r\n                window.location.reload();\r\n            }, 1000);\r\n\r\n        }\r\n        if (response === 204) {\r\n            setMessage(\"Password Don't Match\")\r\n            submitRef.current.removeAttribute(\"disabled\");\r\n            console.log(\"dio cane\")\r\n\r\n            \r\n        }\r\n    }, [response])\r\n\r\n    console.log(response)\r\n\r\n\r\n    return (\r\n        <div>\r\n            <h5>Update Password</h5>\r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n                {message}\r\n                <input\r\n                    name=\"oldPassword\"\r\n                    className=\"form-control mb-2\"\r\n                    type=\"text\"\r\n                    placeholder=\"actual password\"\r\n                    ref={register({\r\n                        required: \"You must type an actual  password\"\r\n                    })}\r\n                />\r\n                {errors.oldPassword && <p>{errors.oldPassword.message}</p>}\r\n                <input\r\n                    name=\"password\"\r\n                    className=\"form-control mb-2\"\r\n                    type=\"text\"\r\n                    placeholder=\"new password\"\r\n                    ref={register({\r\n                        required: \"You must type a new  password\",\r\n                        pattern: {\r\n                            value: regularExpression,\r\n                            message: \"Password must contain 1 or more digit characters\"\r\n                        },\r\n                        minLength: {\r\n                            value: 8,\r\n                            message: \"Password must have at least 8 characters\"\r\n                        }\r\n                    })}\r\n                />\r\n                {errors.password && <p>{errors.password.message}</p>}\r\n                <input\r\n                    name=\"confirmPassword\"\r\n                    className=\"form-control mb-2\"\r\n                    type=\"text\"\r\n                    placeholder=\"confirm password\"\r\n                    ref={register({\r\n                        validate: value =>\r\n                            value === passwordWatched.current || \"The passwords do not match\"\r\n                    })}\r\n                />\r\n                {errors.confirmPassword && <p>{errors.confirmPassword.message}</p>}\r\n                <input type=\"submit\" className=\"form-control mb-1\"  ref={submitRef}/>\r\n\r\n            </form>\r\n            {response === 200 && <div className=\"alert alert-success\">{message}</div>}\r\n            {response === 204 && <div className=\"alert alert-danger\">{message}</div>}\r\n        </div>\r\n    );\r\n\r\n};\r\n\r\n\r\nexport default UpdatePassword"]},"metadata":{},"sourceType":"module"}